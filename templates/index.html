<!-- templates/index.html -->
<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>求根方法</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
</head>
<body class="bg-gray-100 p-8">
    <div class="max-w-md mx-auto bg-white rounded-xl shadow-md overflow-hidden md:max-w-2xl">
        <div class="md:flex">
            <div class="p-8">
                <h1 class="text-2xl font-bold mb-4">求根方法</h1>
                <form action="/" method="post" class="space-y-4">
                    <div>
                        <label for="expression" class="block text-sm font-medium text-gray-700">函数 f(x):</label>
                        <input type="text" name="expression" id="expression" required
                               class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                               placeholder="例如：x**3 - x - 2">
                    </div>
                    <div>
                        <label for="method" class="block text-sm font-medium text-gray-700">方法：</label>
                        <select name="method" id="method" required
                                class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md">
                            <option value="bisection">二分法</option>
                            <option value="aitken">埃特金法</option>
                            <option value="newton">牛顿法</option>
                            <option value="secant">弦截法</option>
                        </select>
                    </div>
                    <div>
                        <label for="tolerance" class="block text-sm font-medium text-gray-700">容差：</label>
                        <input type="number" name="tolerance" id="tolerance" required
                               class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                               step="0.000001" value="0.0001">
                    </div>
                    <div id="bisection-inputs">
                        <div>
                            <label for="a" class="block text-sm font-medium text-gray-700">a：</label>
                            <input type="number" name="a" id="a" step="0.1" value="0"
                                   class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                        </div>
                        <div>
                            <label for="b" class="block text-sm font-medium text-gray-700">b：</label>
                            <input type="number" name="b" id="b" step="0.1" value="2"
                                   class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                        </div>
                    </div>
                    <div id="other-inputs" style="display: none;">
                        <div>
                            <label for="x0" class="block text-sm font-medium text-gray-700">x0：</label>
                            <input type="number" name="x0" id="x0" step="0.1" value="1"
                                   class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                        </div>
                        <div id="x1-input" style="display: none;">
                            <label for="x1" class="block text-sm font-medium text-gray-700">x1（仅用于弦截法）：</label>
                            <input type="number" name="x1" id="x1" step="0.1" value="2"
                                   class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm">
                        </div>
                    </div>
                    <div>
                        <button type="submit" class="w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">
                            计算
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    <script>
        document.getElementById('method').addEventListener('change', function() {
            var method = this.value;
            var bisectionInputs = document.getElementById('bisection-inputs');
            var otherInputs = document.getElementById('other-inputs');
            var x1Input = document.getElementById('x1-input');
            
            if (method === 'bisection') {
                bisectionInputs.style.display = 'block';
                otherInputs.style.display = 'none';
            } else {
                bisectionInputs.style.display = 'none';
                otherInputs.style.display = 'block';
                x1Input.style.display = method === 'secant' ? 'block' : 'none';
            }
        });
    </script>
</body>
</html>